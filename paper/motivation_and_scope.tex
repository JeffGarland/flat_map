\section{Motivation and Scope}

There has been a strong desire for a more space- and/or runtime-efficient
representation for \code{map} among C++ users for some time now.  This has
motivated discussions among the members of SG14 resulting in a
paper\footnote{See P0038R0,
  \href{http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/p0038r0.html}{here}.},
numerous articles and talks, and an implementation in Boost,
\code{boost::container::flat_map}\footnote{Part of Boost.Container,
  \href{http://www.boost.org/doc/libs/1_61_0/doc/html/container.html}{here}.}.
Virtually everyone who makes games, embedded, or system software in C++ uses
the Boost implementation or one that they rolled themselves.\\

Here are some numbers that show why.  The graphs that follow show runtimes for
different \code{map}-like associative containers.  The containers used are
Boost.FlatMap, \code{map}, and two thin wrappers over a sorted \code{vector};
the ``custom pair'' version of the sorted \code{vector} uses a simple
\code{struct} instead of \code{pair} for its value type.  All containers use
an \code{int} as the key type and an \code{int} or a \code{struct} with 5
\code{double}s for the value type.\\

All the graphs below were produced on Windows with MSVC 2015.  Similar results
were obtained on Linux, with Clang 3.9 and libc++, and with g++ 4.8.4 and
libstdc++.\\

These four TODO graphs cover the \code{int}-value-type case.  The first graph
shows insertion of N elements with random keys; the second shows full
iteration across all N elements; the third shows \code{map.find()} called once
for each key used in the original insertions; and the fourth shows erasure of
all N elements, by the keys used in the original insertions.

\begin{tikzpicture}
    \begin{groupplot}[group style={group size=2 by 3, group name=myplot}, width=3.25in]


    \nextgroupplot[
        title={<int, int> Elements},
        xlabel=\empty,
        ylabel={Windows/MSVC 2015},
        xmin=0, xmax=16384,
        ymin=0, ymax=40.0,
        xtick={8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768},
        xticklabels={8,,,,,,,,,,,,},
        ytick={0.0,10.0,20.0,30.0,40.0,50.0},
        ymajorgrids=true,
        grid style=dashed,
        scaled x ticks=false,
        scaled y ticks=true,
        ]

    \addplot[color=blue,mark=|,no markers,]
        coordinates {(8,0.0010814)(16,0.0017428)(32,0.003125)(64,0.0065496)(128,0.0147836)(256,0.0358762)(512,0.0973522)(1024,0.248311)(2048,0.93476)(4096,2.83895)(8192,10.6414)(16384,38.5557)};
        \label{plots:plot0}

    \addplot[color=red,mark=|,no markers,]
        coordinates {(8,0.0010818)(16,0.0024032)(32,0.0054076)(64,0.0091338)(128,0.0188696)(256,0.036238)(512,0.0856942)(1024,0.20588)(2048,0.359896)(4096,0.751539)(8192,1.5545)(16384,3.44963)};
        \label{plots:plot1}

    \addplot[color=brown,mark=|,no markers,]
        coordinates {(8,0.0010214)(16,0.0021036)(32,0.004387)(64,0.0078124)(128,0.0167056)(256,0.0310082)(512,0.0600932)(1024,0.118326)(2048,0.241036)(4096,0.512358)(8192,0.989928)(16384,2.00612)};
        \label{plots:plot2}

    \addplot[color=green,mark=|,no markers,]
        coordinates {(8,0.0010818)(16,0.0019834)(32,0.0037862)(64,0.0069712)(128,0.0144832)(256,0.0344936)(512,0.105287)(1024,0.257383)(2048,0.82172)(4096,2.99442)(8192,10.5933)(16384,39.7846)};
        \label{plots:plot3}

    \addplot[color=black,mark=|,no markers,]
        coordinates {(8,0.0011416)(16,0.0017432)(32,0.0032452)(64,0.00691)(128,0.0146624)(256,0.0311904)(512,0.0660426)(1024,0.155281)(2048,0.405993)(4096,1.14197)(8192,3.58257)(16384,12.4842)};
        \label{plots:plot4}

    \coordinate (top) at (rel axis cs:0,1);% coordinate at top of the first plot


    \nextgroupplot[
        title={<string, string> Elements},
        xlabel=\empty,
        ylabel=\empty,
        xmin=0, xmax=16384,
        ymin=0, ymax=800.0,
        xtick={8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768},
        xticklabels={8,,,,,,,,,,,,},
        ytick={0.0,100.0,200.0,300.0,400.0,500.0,600.0,700.0,800.0,900.0},
        ymajorgrids=true,
        grid style=dashed,
        scaled x ticks=false,
        scaled y ticks=true,
        ]

    \addplot[color=blue,mark=|,no markers,]
        coordinates {(8,0.0021638)(16,0.0100956)(32,0.0233172)(64,0.0344342)(128,0.125114)(256,0.245421)(512,0.872324)(1024,3.47439)(2048,13.4845)(4096,52.0793)(8192,208.718)(16384,792.793)};
        \label{plots:plot0}

    \addplot[color=red,mark=|,no markers,]
        coordinates {(8,0.0019228)(16,0.0029448)(32,0.0057694)(64,0.0129798)(128,0.0265024)(256,0.0536648)(512,0.123852)(1024,0.504849)(2048,0.585732)(4096,1.16852)(8192,2.62784)(16384,5.36481)};
        \label{plots:plot1}

    \addplot[color=brown,mark=|,no markers,]
        coordinates {(8,0.0021034)(16,0.0025842)(32,0.0048064)(64,0.0096146)(128,0.0209156)(256,0.0392452)(512,0.07716)(1024,0.177753)(2048,0.36207)(4096,0.669146)(8192,1.52801)(16384,2.99052)};
        \label{plots:plot2}

    \addplot[color=green,mark=|,no markers,]
        coordinates {(8,0.003185)(16,0.0060094)(32,0.0112376)(64,0.0293246)(128,0.0873198)(256,0.281122)(512,0.907599)(1024,3.30131)(2048,13.7369)(4096,50.6782)(8192,202.304)(16384,787.585)};
        \label{plots:plot3}

    \addplot[color=black,mark=|,no markers,]
        coordinates {(8,0.002764)(16,0.0045676)(32,0.0104568)(64,0.0464528)(128,0.0753564)(256,0.340912)(512,0.934826)(1024,3.20583)(2048,13.0216)(4096,52.5288)(8192,199.344)(16384,798.37)};
        \label{plots:plot4}


    \nextgroupplot[
        title=\empty,
        xlabel=\empty,
        ylabel={Linux/Clang 3.8},
        xmin=0, xmax=16384,
        ymin=0, ymax=200.0,
        xtick={8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768},
        xticklabels={8,,,,,,,,,,,,},
        ytick={0.0,100.0,200.0,300.0},
        ymajorgrids=true,
        grid style=dashed,
        scaled x ticks=false,
        scaled y ticks=true,
        ]

    \addplot[color=blue,mark=|,no markers,]
        coordinates {(8,0.0051682)(16,0.0103366)(32,0.0195552)(64,0.0381328)(128,0.0774684)(256,0.159712)(512,0.352436)(1024,0.877671)(2048,2.29799)(4096,11.7495)(8192,53.9833)(16384,196.448)};
        \label{plots:plot0}

    \addplot[color=red,mark=|,no markers,]
        coordinates {(8,0.0049026)(16,0.0098618)(32,0.0193316)(64,0.0381472)(128,0.0755124)(256,0.16575)(512,0.314213)(1024,0.766604)(2048,1.34756)(4096,3.13117)(8192,6.17872)(16384,12.6943)};
        \label{plots:plot1}

    \addplot[color=brown,mark=|,no markers,]
        coordinates {(8,0.0060628)(16,0.011007)(32,0.0213284)(64,0.0414992)(128,0.081603)(256,0.267787)(512,0.46282)(1024,0.735791)(2048,1.77535)(4096,3.49727)(8192,6.87083)(16384,13.6288)};
        \label{plots:plot2}

    \addplot[color=green,mark=|,no markers,]
        coordinates {(8,0.0050706)(16,0.0098472)(32,0.0188574)(64,0.0383984)(128,0.0759856)(256,0.165171)(512,0.344054)(1024,0.865813)(2048,3.28058)(4096,11.6805)(8192,54.2499)(16384,196.588)};
        \label{plots:plot3}

    \addplot[color=black,mark=|,no markers,]
        coordinates {(8,0.004889)(16,0.009806)(32,0.0188428)(64,0.0373374)(128,0.074955)(256,0.154618)(512,0.310866)(1024,0.814979)(2048,1.94596)(4096,4.70239)(8192,15.426)(16384,79.2837)};
        \label{plots:plot4}


    \nextgroupplot[
        title=\empty,
        xlabel=\empty,
        ylabel=\empty,
        xmin=0, xmax=16384,
        ymin=0, ymax=2000.0,
        xtick={8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768},
        xticklabels={8,,,,,,,,,,,,},
        ytick={0.0,1000.0,2000.0,3000.0},
        ymajorgrids=true,
        grid style=dashed,
        scaled x ticks=false,
        scaled y ticks=true,
        ]

    \addplot[color=blue,mark=|,no markers,]
        coordinates {(8,0.008395)(16,0.0170128)(32,0.0375324)(64,0.0860034)(128,0.238438)(256,0.833318)(512,3.46777)(1024,12.227)(2048,41.0353)(4096,138.535)(8192,497.819)(16384,1868.14)};
        \label{plots:plot0}

    \addplot[color=red,mark=|,no markers,]
        coordinates {(8,0.0065226)(16,0.013382)(32,0.0274324)(64,0.0568512)(128,0.119194)(256,0.250253)(512,0.562218)(1024,1.23669)(2048,1.85724)(4096,5.3828)(8192,11.712)(16384,24.7115)};
        \label{plots:plot1}

    \addplot[color=brown,mark=|,no markers,]
        coordinates {(8,0.0080318)(16,0.0167338)(32,0.0322658)(64,0.065512)(128,0.138157)(256,0.278538)(512,0.554051)(1024,1.1529)(2048,2.23975)(4096,3.89718)(8192,8.881)(16384,18.088)};
        \label{plots:plot2}

    \addplot[color=green,mark=|,no markers,]
        coordinates {(8,0.0074456)(16,0.0161756)(32,0.0424764)(64,0.0847448)(128,0.232808)(256,0.869983)(512,3.7102)(1024,12.2279)(2048,41.1152)(4096,138.597)(8192,500.857)(16384,1753.32)};
        \label{plots:plot3}

    \addplot[color=black,mark=|,no markers,]
        coordinates {(8,0.0071376)(16,0.0155612)(32,0.0356752)(64,0.0837964)(128,0.277632)(256,0.839266)(512,3.46018)(1024,12.2553)(2048,41.0326)(4096,138.477)(8192,497.257)(16384,1868.33)};
        \label{plots:plot4}


    \nextgroupplot[
        title=\empty,
        xlabel={N},
        ylabel={Linux/GCC 4.8.4},
        xmin=0, xmax=16384,
        ymin=0, ymax=90.0,
        xtick={8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768},
        xticklabels={8,,,,,,,,,,,,},
        ytick={0.0,10.0,20.0,30.0,40.0,50.0,60.0,70.0,80.0,90.0,100.0},
        ymajorgrids=true,
        grid style=dashed,
        scaled x ticks=false,
        scaled y ticks=true,
        ]

    \addplot[color=blue,mark=|,no markers,]
        coordinates {(8,0.0058254)(16,0.0105184)(32,0.0207974)(64,0.0396982)(128,0.0768536)(256,0.157394)(512,0.329579)(1024,0.74383)(2048,1.80803)(4096,4.88952)(8192,15.7751)(16384,75.8362)};
        \label{plots:plot0}

    \addplot[color=red,mark=|,no markers,]
        coordinates {(8,0.0058662)(16,0.011469)(32,0.0204356)(64,0.040703)(128,0.0791736)(256,0.155858)(512,0.312235)(1024,0.624101)(2048,1.29279)(4096,2.52753)(8192,5.12744)(16384,10.2646)};
        \label{plots:plot1}

    \addplot[color=brown,mark=|,no markers,]
        coordinates {(8,0.0059084)(16,0.0123904)(32,0.0214414)(64,0.0426586)(128,0.0815454)(256,0.157032)(512,0.319008)(1024,0.638657)(2048,1.30234)(4096,2.55571)(8192,5.10088)(16384,10.2703)};
        \label{plots:plot2}

    \addplot[color=green,mark=|,no markers,]
        coordinates {(8,0.0055596)(16,0.010559)(32,0.019109)(64,0.0394174)(128,0.0772598)(256,0.159782)(512,0.330857)(1024,0.752148)(2048,1.88687)(4096,5.09475)(8192,17.1082)(16384,82.0665)};
        \label{plots:plot3}

    \addplot[color=black,mark=|,no markers,]
        coordinates {(8,0.0054064)(16,0.0106576)(32,0.0192062)(64,0.0384818)(128,0.0748854)(256,0.150203)(512,0.306951)(1024,0.632339)(2048,1.35599)(4096,3.02391)(8192,7.93802)(16384,24.5008)};
        \label{plots:plot4}


    \nextgroupplot[
        title=\empty,
        xlabel={N},
        ylabel=\empty,
        xmin=0, xmax=16384,
        ymin=0, ymax=600.0,
        xtick={8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768},
        xticklabels={8,,,,,,,,,,,,},
        ytick={0.0,100.0,200.0,300.0,400.0,500.0,600.0,700.0},
        ymajorgrids=true,
        grid style=dashed,
        scaled x ticks=false,
        scaled y ticks=true,
        ]

    \addplot[color=blue,mark=|,no markers,]
        coordinates {(8,0.0052402)(16,0.0106994)(32,0.0217656)(64,0.047213)(128,0.112556)(256,0.276053)(512,0.761119)(1024,2.48337)(2048,11.5062)(4096,42.3264)(8192,152.772)(16384,571.596)};
        \label{plots:plot0}

    \addplot[color=red,mark=|,no markers,]
        coordinates {(8,0.0055312)(16,0.0107586)(32,0.0215126)(64,0.0431198)(128,0.0881378)(256,0.18515)(512,0.389214)(1024,0.806491)(2048,1.63775)(4096,3.44311)(8192,7.19106)(16384,15.152)};
        \label{plots:plot1}

    \addplot[color=brown,mark=|,no markers,]
        coordinates {(8,0.005238)(16,0.0100298)(32,0.0199462)(64,0.0394344)(128,0.0805828)(256,0.159781)(512,0.320142)(1024,0.65078)(2048,1.3038)(4096,2.67089)(8192,5.28646)(16384,10.6409)};
        \label{plots:plot2}

    \addplot[color=green,mark=|,no markers,]
        coordinates {(8,0.0053204)(16,0.0107134)(32,0.0217752)(64,0.0463884)(128,0.106145)(256,0.258058)(512,0.698464)(1024,2.08528)(2048,9.75615)(4096,38.1169)(8192,142.008)(16384,538.376)};
        \label{plots:plot3}

    \addplot[color=black,mark=|,no markers,]
        coordinates {(8,0.0052638)(16,0.0105934)(32,0.0211174)(64,0.0458858)(128,0.106435)(256,0.25348)(512,0.689941)(1024,2.07442)(2048,9.72303)(4096,38.0368)(8192,142.082)(16384,541.678)};
        \label{plots:plot4}

    \coordinate (bot) at (rel axis cs:1,0);% coordinate at bottom of the last plot

    \end{groupplot}

    \path (myplot c1r1.outer north west)% plot in column 1 row 1
          -- node[anchor=south,rotate=90] {Time [milliseconds]}% label midway
          (myplot c1r3.outer south west);% plot in column 1 row 3

    % legend
    \path (myplot c1r3.south west|-current bounding box.south)--
      coordinate(legendpos)
      (myplot c2r3.south east|-current bounding box.south);
    \matrix[
        matrix of nodes,
        anchor=south,
        draw,
        inner sep=0.2em,
        draw
      ]at([yshift=-5ex]legendpos)
      {
        \ref{plots:plot0}& Boost.FlatMap&[5pt]
        \ref{plots:plot1}& std::map&[5pt]
        \ref{plots:plot2}& std::unordered\_map&[5pt]
        \ref{plots:plot3}& std::vector&[5pt]
        \ref{plots:plot4}& std::vector (custom pair)&[5pt]\\
      };

\end{tikzpicture}
\\
\\


As one might expect, insertionion takes longer in contiguous-storage
implementations.  Boost.FlatMap and a sorted \code{vector<pair<int, int>>}
have superlinear growth in insertion time.  While the curve for sorted
\code{vector} using a custom \code{struct} instead of a \code{pair} is
superlinear as well, it is dramatically flatter in its growth -- much closer
to node-based \code{map}.

\begin{tikzpicture}
    \begin{groupplot}[group style={group size=2 by 3, group name=myplot}, width=3.25in]


    \nextgroupplot[
        title={<int, int> Elements},
        xlabel=\empty,
        ylabel={Windows/MSVC 2015},
        xmin=0, xmax=16384,
        ymin=0, ymax=1.0,
        xtick={8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768},
        xticklabels={8,,,,,,,,,,,,},
        ytick={0.0,1.0,2.0},
        ymajorgrids=true,
        grid style=dashed,
        scaled x ticks=false,
        scaled y ticks=true,
        ]

    \addplot[color=blue,mark=|,no markers,]
        coordinates {(8,0)(16,0)(32,6.02e-05)(64,0)(128,0.0001202)(256,0.0003002)(512,0.0003608)(1024,0.000661)(2048,0.0016228)(4096,0.0027044)(8192,0.0061294)(16384,0.0122592)};
        \label{plots:plot0}

    \addplot[color=red,mark=|,no markers,]
        coordinates {(8,0.0001202)(16,0.00018)(32,0.0003004)(64,0.0003604)(128,0.0008412)(256,0.0015626)(512,0.0036058)(1024,0.0087736)(2048,0.0183288)(4096,0.043568)(8192,0.105645)(16384,0.268559)};
        \label{plots:plot1}

    \addplot[color=brown,mark=|,no markers,]
        coordinates {(8,0)(16,0)(32,0)(64,0.00018)(128,0.000301)(256,0.000601)(512,0.0015022)(1024,0.002764)(2048,0.0076916)(4096,0.0176074)(8192,0.0355154)(16384,0.0961504)};
        \label{plots:plot2}

    \addplot[color=green,mark=|,no markers,]
        coordinates {(8,6e-05)(16,0)(32,0)(64,0)(128,6e-05)(256,0.0001804)(512,0.000301)(1024,0.000481)(2048,0.0008412)(4096,0.0018028)(8192,0.0042666)(16384,0.008954)};
        \label{plots:plot3}

    \addplot[color=black,mark=|,no markers,]
        coordinates {(8,6.02e-05)(16,0)(32,0)(64,0)(128,0.0001202)(256,0.0002402)(512,6e-05)(1024,0.0003004)(2048,0.000661)(4096,0.0015026)(8192,0.0034856)(16384,0.007091)};
        \label{plots:plot4}

    \coordinate (top) at (rel axis cs:0,1);% coordinate at top of the first plot


    \nextgroupplot[
        title={<string, string> Elements},
        xlabel=\empty,
        ylabel=\empty,
        xmin=0, xmax=16384,
        ymin=0, ymax=1.0,
        xtick={8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768},
        xticklabels={8,,,,,,,,,,,,},
        ytick={0.0,1.0,2.0},
        ymajorgrids=true,
        grid style=dashed,
        scaled x ticks=false,
        scaled y ticks=true,
        ]

    \addplot[color=blue,mark=|,no markers,]
        coordinates {(8,0.0002404)(16,0.0003008)(32,0.0004208)(64,0.000781)(128,0.0015022)(256,0.0028842)(512,0.0060092)(1024,0.0118386)(2048,0.02554)(4096,0.0457916)(8192,0.100176)(16384,0.187613)};
        \label{plots:plot0}

    \addplot[color=red,mark=|,no markers,]
        coordinates {(8,0.0003004)(16,0.0003006)(32,0.000601)(64,0.0010816)(128,0.0023434)(256,0.0045672)(512,0.0095548)(1024,0.0388804)(2048,0.0446498)(4096,0.0981936)(8192,0.233345)(16384,0.656826)};
        \label{plots:plot1}

    \addplot[color=brown,mark=|,no markers,]
        coordinates {(8,0.0003004)(16,0.0003008)(32,0.0003608)(64,0.0009014)(128,0.0016228)(256,0.0031252)(512,0.00625)(1024,0.0150836)(2048,0.0277032)(4096,0.0548654)(8192,0.156304)(16384,0.567948)};
        \label{plots:plot2}

    \addplot[color=green,mark=|,no markers,]
        coordinates {(8,0.00024)(16,0.0002404)(32,0.0003606)(64,0.000841)(128,0.0015026)(256,0.0058292)(512,0.005769)(1024,0.011598)(2048,0.0228358)(4096,0.0462718)(8192,0.0927852)(16384,0.193623)};
        \label{plots:plot3}

    \addplot[color=black,mark=|,no markers,]
        coordinates {(8,0)(16,0.0002402)(32,0.000481)(64,0.000841)(128,0.0015028)(256,0.003005)(512,0.0063098)(1024,0.0114178)(2048,0.0259606)(4096,0.046212)(8192,0.0941672)(16384,0.18575)};
        \label{plots:plot4}


    \nextgroupplot[
        title=\empty,
        xlabel=\empty,
        ylabel={Linux/Clang 3.8},
        xmin=0, xmax=16384,
        ymin=0, ymax=1.0,
        xtick={8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768},
        xticklabels={8,,,,,,,,,,,,},
        ytick={0.0,1.0,2.0},
        ymajorgrids=true,
        grid style=dashed,
        scaled x ticks=false,
        scaled y ticks=true,
        ]

    \addplot[color=blue,mark=|,no markers,]
        coordinates {(8,0.0006844)(16,0.000559)(32,0.0006848)(64,0.0005868)(128,0.000601)(256,0.0006566)(512,0.000866)(1024,0.0010612)(2048,0.0019136)(4096,0.0050284)(8192,0.01767)(16384,0.026358)};
        \label{plots:plot0}

    \addplot[color=red,mark=|,no markers,]
        coordinates {(8,0.000559)(16,0.0007124)(32,0.000824)(64,0.0009778)(128,0.0012016)(256,0.002626)(512,0.0068442)(1024,0.0189268)(2048,0.0506492)(4096,0.14791)(8192,0.360884)(16384,0.880726)};
        \label{plots:plot1}

    \addplot[color=brown,mark=|,no markers,]
        coordinates {(8,0.0006564)(16,0.0006706)(32,0.0006006)(64,0.0008376)(128,0.0009776)(256,0.0032544)(512,0.0033664)(1024,0.0138986)(2048,0.0314146)(4096,0.0860166)(8192,0.166502)(16384,0.434622)};
        \label{plots:plot2}

    \addplot[color=green,mark=|,no markers,]
        coordinates {(8,0.000559)(16,0.0006706)(32,0.0006564)(64,0.0006708)(128,0.000824)(256,0.0007682)(512,0.000894)(1024,0.0011032)(2048,0.0027934)(4096,0.0081994)(8192,0.0178514)(16384,0.0321552)};
        \label{plots:plot3}

    \addplot[color=black,mark=|,no markers,]
        coordinates {(8,0.0006708)(16,0.0006706)(32,0.0007686)(64,0.000824)(128,0.0006008)(256,0.0006986)(512,0.0007684)(1024,0.0017878)(2048,0.0028354)(4096,0.006733)(8192,0.0172926)(16384,0.0266932)};
        \label{plots:plot4}


    \nextgroupplot[
        title=\empty,
        xlabel=\empty,
        ylabel=\empty,
        xmin=0, xmax=16384,
        ymin=0, ymax=2.0,
        xtick={8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768},
        xticklabels={8,,,,,,,,,,,,},
        ytick={0.0,1.0,2.0,3.0},
        ymajorgrids=true,
        grid style=dashed,
        scaled x ticks=false,
        scaled y ticks=true,
        ]

    \addplot[color=blue,mark=|,no markers,]
        coordinates {(8,0.0008104)(16,0.00095)(32,0.0011036)(64,0.0016202)(128,0.002612)(256,0.0045816)(512,0.0134794)(1024,0.0221398)(2048,0.0394884)(4096,0.07128)(8192,0.147267)(16384,0.278331)};
        \label{plots:plot0}

    \addplot[color=red,mark=|,no markers,]
        coordinates {(8,0.0007824)(16,0.0009218)(32,0.0012572)(64,0.0022072)(128,0.0040648)(256,0.015435)(512,0.0273778)(1024,0.0543784)(2048,0.0635834)(4096,0.264294)(8192,0.522329)(16384,1.38287)};
        \label{plots:plot1}

    \addplot[color=brown,mark=|,no markers,]
        coordinates {(8,0.0007822)(16,0.0009078)(32,0.0012016)(64,0.001802)(128,0.0031986)(256,0.0147508)(512,0.0185218)(1024,0.0323086)(2048,0.056627)(4096,0.102303)(8192,0.289702)(16384,0.676217)};
        \label{plots:plot2}

    \addplot[color=green,mark=|,no markers,]
        coordinates {(8,0.000838)(16,0.000908)(32,0.0011592)(64,0.0016622)(128,0.0025702)(256,0.0046794)(512,0.0151276)(1024,0.0245704)(2048,0.039991)(4096,0.0713358)(8192,0.140158)(16384,0.280539)};
        \label{plots:plot3}

    \addplot[color=black,mark=|,no markers,]
        coordinates {(8,0.0008104)(16,0.0009638)(32,0.0011316)(64,0.0016064)(128,0.002654)(256,0.0046654)(512,0.0169018)(1024,0.024291)(2048,0.0402566)(4096,0.0714056)(8192,0.138886)(16384,0.283263)};
        \label{plots:plot4}


    \nextgroupplot[
        title=\empty,
        xlabel={N},
        ylabel={Linux/GCC 4.8.4},
        xmin=0, xmax=16384,
        ymin=0, ymax=1.0,
        xtick={8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768},
        xticklabels={8,,,,,,,,,,,,},
        ytick={0.0,1.0,2.0},
        ymajorgrids=true,
        grid style=dashed,
        scaled x ticks=false,
        scaled y ticks=true,
        ]

    \addplot[color=blue,mark=|,no markers,]
        coordinates {(8,0.000726)(16,0.0007262)(32,0.0007404)(64,0.0006144)(128,0.000601)(256,0.0006148)(512,0.0008102)(1024,0.0007826)(2048,0.0011592)(4096,0.0019278)(8192,0.0033384)(16384,0.0131162)};
        \label{plots:plot0}

    \addplot[color=red,mark=|,no markers,]
        coordinates {(8,0.000629)(16,0.0007826)(32,0.000838)(64,0.0010898)(128,0.0012708)(256,0.0024726)(512,0.0050428)(1024,0.017796)(2048,0.0287324)(4096,0.0741718)(8192,0.204356)(16384,0.430809)};
        \label{plots:plot1}

    \addplot[color=brown,mark=|,no markers,]
        coordinates {(8,0.0007126)(16,0.0007268)(32,0.000712)(64,0.0008938)(128,0.0010052)(256,0.0016624)(512,0.0028356)(1024,0.0109236)(2048,0.021553)(4096,0.0375466)(8192,0.0924562)(16384,0.228702)};
        \label{plots:plot2}

    \addplot[color=green,mark=|,no markers,]
        coordinates {(8,0.000726)(16,0.000629)(32,0.0006846)(64,0.000587)(128,0.0006006)(256,0.0008238)(512,0.0008242)(1024,0.0007962)(2048,0.0011592)(4096,0.0018998)(8192,0.0033244)(16384,0.0143314)};
        \label{plots:plot3}

    \addplot[color=black,mark=|,no markers,]
        coordinates {(8,0.0007126)(16,0.0007266)(32,0.0006846)(64,0.0006284)(128,0.0005868)(256,0.0006428)(512,0.0006424)(1024,0.0007822)(2048,0.0011172)(4096,0.0019556)(8192,0.0033108)(16384,0.0125434)};
        \label{plots:plot4}


    \nextgroupplot[
        title=\empty,
        xlabel={N},
        ylabel=\empty,
        xmin=0, xmax=16384,
        ymin=0, ymax=2.0,
        xtick={8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768},
        xticklabels={8,,,,,,,,,,,,},
        ytick={0.0,1.0,2.0,3.0},
        ymajorgrids=true,
        grid style=dashed,
        scaled x ticks=false,
        scaled y ticks=true,
        ]

    \addplot[color=blue,mark=|,no markers,]
        coordinates {(8,0.0006702)(16,0.0006286)(32,0.0007682)(64,0.000894)(128,0.0012292)(256,0.001788)(512,0.003017)(1024,0.0118454)(2048,0.0182284)(4096,0.0239416)(8192,0.0478552)(16384,0.0896062)};
        \label{plots:plot0}

    \addplot[color=red,mark=|,no markers,]
        coordinates {(8,0.0006982)(16,0.0007544)(32,0.000936)(64,0.0011592)(128,0.0018996)(256,0.0039668)(512,0.0154626)(1024,0.0253806)(2048,0.0530792)(4096,0.11697)(8192,0.252965)(16384,1.01837)};
        \label{plots:plot1}

    \addplot[color=brown,mark=|,no markers,]
        coordinates {(8,0.0006848)(16,0.000629)(32,0.0008108)(64,0.000936)(128,0.0014108)(256,0.0030868)(512,0.0130186)(1024,0.0195)(2048,0.0398376)(4096,0.0803178)(8192,0.223087)(16384,0.687657)};
        \label{plots:plot2}

    \addplot[color=green,mark=|,no markers,]
        coordinates {(8,0.0006986)(16,0.0007544)(32,0.0007686)(64,0.0009356)(128,0.001327)(256,0.0021232)(512,0.0036736)(1024,0.0127114)(2048,0.0208966)(4096,0.032965)(8192,0.0582198)(16384,0.108394)};
        \label{plots:plot3}

    \addplot[color=black,mark=|,no markers,]
        coordinates {(8,0.0006568)(16,0.0007128)(32,0.0007964)(64,0.0009358)(128,0.0011878)(256,0.0018158)(512,0.0030174)(1024,0.0118728)(2048,0.0181868)(4096,0.0266236)(8192,0.0479668)(16384,0.0889918)};
        \label{plots:plot4}

    \coordinate (bot) at (rel axis cs:1,0);% coordinate at bottom of the last plot

    \end{groupplot}

    \path (myplot c1r1.outer north west)% plot in column 1 row 1
          -- node[anchor=south,rotate=90] {Time [milliseconds]}% label midway
          (myplot c1r3.outer south west);% plot in column 1 row 3

    % legend
    \path (myplot c1r3.south west|-current bounding box.south)--
      coordinate(legendpos)
      (myplot c2r3.south east|-current bounding box.south);
    \matrix[
        matrix of nodes,
        anchor=south,
        draw,
        inner sep=0.2em,
        draw
      ]at([yshift=-5ex]legendpos)
      {
        \ref{plots:plot0}& Boost.FlatMap&[5pt]
        \ref{plots:plot1}& std::map&[5pt]
        \ref{plots:plot2}& std::unordered\_map&[5pt]
        \ref{plots:plot3}& std::vector&[5pt]
        \ref{plots:plot4}& std::vector (custom pair)&[5pt]\\
      };

\end{tikzpicture}
\\
\\


For all variants but \code{map}, iteration is relatively similar, and much
faster that \code{map}'s.

\begin{tikzpicture}
    \begin{groupplot}[group style={group size=2 by 3, group name=myplot}, width=3.25in]


    \nextgroupplot[
        title={<int, int> Elements},
        xlabel=\empty,
        ylabel={Windows/MSVC 2015},
        xmin=0, xmax=16384,
        ymin=0, ymax=3.0,
        xtick={8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768},
        xticklabels={8,,,,,,,,,,,,},
        ytick={0.0,1.0,2.0,3.0,4.0},
        ymajorgrids=true,
        grid style=dashed,
        scaled x ticks=false,
        scaled y ticks=true,
        ]

    \addplot[color=blue,mark=|,no markers,]
        coordinates {(8,0.0004206)(16,0.000661)(32,0.0019836)(64,0.0044464)(128,0.0099146)(256,0.0210336)(512,0.0440508)(1024,0.090624)(2048,0.219158)(4096,0.397037)(8192,0.871183)(16384,1.81273)};
        \label{plots:plot0}

    \addplot[color=red,mark=|,no markers,]
        coordinates {(8,0.0003604)(16,0.000781)(32,0.0020432)(64,0.0043266)(128,0.0086532)(256,0.01977)(512,0.0429696)(1024,0.089117)(2048,0.211229)(4096,0.438986)(8192,0.982241)(16384,2.25059)};
        \label{plots:plot1}

    \addplot[color=brown,mark=|,no markers,]
        coordinates {(8,0.0003606)(16,0.000661)(32,0.0012018)(64,0.0028248)(128,0.0057092)(256,0.0108792)(512,0.0245176)(1024,0.0472326)(2048,0.0965104)(4096,0.194164)(8192,0.385264)(16384,0.814765)};
        \label{plots:plot2}

    \addplot[color=green,mark=|,no markers,]
        coordinates {(8,0.0006012)(16,0.0008418)(32,0.0022838)(64,0.0054086)(128,0.0110584)(256,0.0239782)(512,0.05)(1024,0.103662)(2048,0.223488)(4096,0.463866)(8192,0.961144)(16384,2.09145)};
        \label{plots:plot3}

    \addplot[color=black,mark=|,no markers,]
        coordinates {(8,0.0004808)(16,0.0009016)(32,0.002164)(64,0.005108)(128,0.0114788)(256,0.0242784)(512,0.0492742)(1024,0.102642)(2048,0.262424)(4096,0.462062)(8192,0.99864)(16384,2.07379)};
        \label{plots:plot4}

    \coordinate (top) at (rel axis cs:0,1);% coordinate at top of the first plot


    \nextgroupplot[
        title={<string, string> Elements},
        xlabel=\empty,
        ylabel=\empty,
        xmin=0, xmax=16384,
        ymin=0, ymax=5.0,
        xtick={8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768},
        xticklabels={8,,,,,,,,,,,,},
        ytick={0.0,1.0,2.0,3.0,4.0,5.0,6.0},
        ymajorgrids=true,
        grid style=dashed,
        scaled x ticks=false,
        scaled y ticks=true,
        ]

    \addplot[color=blue,mark=|,no markers,]
        coordinates {(8,0.0005408)(16,0.0013824)(32,0.0022238)(64,0.0064298)(128,0.021514)(256,0.0295078)(512,0.0654404)(1024,0.143202)(2048,0.336832)(4096,0.767401)(8192,1.69369)(16384,3.57084)};
        \label{plots:plot0}

    \addplot[color=red,mark=|,no markers,]
        coordinates {(8,0.0010226)(16,0.001022)(32,0.0021032)(64,0.0041464)(128,0.0128596)(256,0.0254202)(512,0.0589538)(1024,0.20961)(2048,0.326356)(4096,0.632425)(8192,1.56989)(16384,3.66574)};
        \label{plots:plot1}

    \addplot[color=brown,mark=|,no markers,]
        coordinates {(8,0.0006008)(16,0.0007206)(32,0.0016826)(64,0.0036654)(128,0.0067906)(256,0.0146622)(512,0.0305864)(1024,0.0600304)(2048,0.135936)(4096,0.250823)(8192,0.587356)(16384,1.27726)};
        \label{plots:plot2}

    \addplot[color=green,mark=|,no markers,]
        coordinates {(8,0.0009616)(16,0.0016224)(32,0.003546)(64,0.0076326)(128,0.0163448)(256,0.0543226)(512,0.0767386)(1024,0.170426)(2048,0.417476)(4096,0.845279)(8192,1.94853)(16384,4.51365)};
        \label{plots:plot3}

    \addplot[color=black,mark=|,no markers,]
        coordinates {(8,0.0005408)(16,0.0014424)(32,0.0027642)(64,0.0123202)(128,0.0146044)(256,0.03197)(512,0.100416)(1024,0.15985)(2048,0.356536)(4096,0.838854)(8192,1.80306)(16384,4.22267)};
        \label{plots:plot4}


    \nextgroupplot[
        title=\empty,
        xlabel=\empty,
        ylabel={Linux/Clang 3.8},
        xmin=0, xmax=16384,
        ymin=0, ymax=20.0,
        xtick={8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768},
        xticklabels={8,,,,,,,,,,,,},
        ytick={0.0,10.0,20.0,30.0},
        ymajorgrids=true,
        grid style=dashed,
        scaled x ticks=false,
        scaled y ticks=true,
        ]

    \addplot[color=blue,mark=|,no markers,]
        coordinates {(8,0.0045684)(16,0.009261)(32,0.0185636)(64,0.0364568)(128,0.0727736)(256,0.145214)(512,0.294953)(1024,0.670224)(2048,1.21372)(4096,2.69158)(8192,5.34482)(16384,10.7908)};
        \label{plots:plot0}

    \addplot[color=red,mark=|,no markers,]
        coordinates {(8,0.004791)(16,0.0094986)(32,0.0182292)(64,0.0362332)(128,0.0723266)(256,0.168162)(512,0.307345)(1024,0.649194)(2048,1.34085)(4096,2.64103)(8192,5.24566)(16384,10.5011)};
        \label{plots:plot1}

    \addplot[color=brown,mark=|,no markers,]
        coordinates {(8,0.004847)(16,0.0093304)(32,0.0185636)(64,0.0365974)(128,0.0730386)(256,0.170739)(512,0.306159)(1024,0.629188)(2048,1.3664)(4096,2.64284)(8192,5.34609)(16384,10.6568)};
        \label{plots:plot2}

    \addplot[color=green,mark=|,no markers,]
        coordinates {(8,0.004764)(16,0.0092608)(32,0.0186476)(64,0.0364574)(128,0.0729982)(256,0.146875)(512,0.291323)(1024,0.65853)(2048,1.38623)(4096,2.77532)(8192,5.62783)(16384,11.3591)};
        \label{plots:plot3}

    \addplot[color=black,mark=|,no markers,]
        coordinates {(8,0.004791)(16,0.0093034)(32,0.0187314)(64,0.0364576)(128,0.0724796)(256,0.147311)(512,0.342309)(1024,0.658059)(2048,1.39248)(4096,2.75871)(8192,5.58827)(16384,11.4489)};
        \label{plots:plot4}


    \nextgroupplot[
        title=\empty,
        xlabel=\empty,
        ylabel=\empty,
        xmin=0, xmax=16384,
        ymin=0, ymax=30.0,
        xtick={8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768},
        xticklabels={8,,,,,,,,,,,,},
        ytick={0.0,10.0,20.0,30.0,40.0},
        ymajorgrids=true,
        grid style=dashed,
        scaled x ticks=false,
        scaled y ticks=true,
        ]

    \addplot[color=blue,mark=|,no markers,]
        coordinates {(8,0.0061464)(16,0.0119716)(32,0.0244036)(64,0.0504678)(128,0.105011)(256,0.219047)(512,0.474529)(1024,1.01147)(2048,2.13661)(4096,4.4922)(8192,9.68324)(16384,20.8416)};
        \label{plots:plot0}

    \addplot[color=red,mark=|,no markers,]
        coordinates {(8,0.0058536)(16,0.0117338)(32,0.0273786)(64,0.0494482)(128,0.105715)(256,0.213934)(512,0.458649)(1024,1.00129)(2048,1.84223)(4096,4.51588)(8192,9.77394)(16384,21.0322)};
        \label{plots:plot1}

    \addplot[color=brown,mark=|,no markers,]
        coordinates {(8,0.00637)(16,0.0153104)(32,0.0244864)(64,0.0483726)(128,0.0983098)(256,0.196183)(512,0.393735)(1024,0.817702)(2048,1.63992)(4096,3.33094)(8192,6.84211)(16384,13.7317)};
        \label{plots:plot2}

    \addplot[color=green,mark=|,no markers,]
        coordinates {(8,0.006258)(16,0.0126272)(32,0.025953)(64,0.0531624)(128,0.110209)(256,0.232448)(512,0.492662)(1024,1.0721)(2048,2.24478)(4096,4.73298)(8192,10.1934)(16384,22.1073)};
        \label{plots:plot3}

    \addplot[color=black,mark=|,no markers,]
        coordinates {(8,0.0064392)(16,0.0125848)(32,0.0258828)(64,0.0523674)(128,0.111665)(256,0.230023)(512,0.501116)(1024,1.06141)(2048,2.21907)(4096,4.66396)(8192,10.06)(16384,21.778)};
        \label{plots:plot4}


    \nextgroupplot[
        title=\empty,
        xlabel={N},
        ylabel={Linux/GCC 4.8.4},
        xmin=0, xmax=16384,
        ymin=0, ymax=10.0,
        xtick={8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768},
        xticklabels={8,,,,,,,,,,,,},
        ytick={0.0,1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0,9.0,10.0,11.0},
        ymajorgrids=true,
        grid style=dashed,
        scaled x ticks=false,
        scaled y ticks=true,
        ]

    \addplot[color=blue,mark=|,no markers,]
        coordinates {(8,0.005155)(16,0.0098758)(32,0.0198628)(64,0.0372808)(128,0.0729014)(256,0.147016)(512,0.287744)(1024,0.581121)(2048,1.18185)(4096,2.32339)(8192,4.67232)(16384,9.34326)};
        \label{plots:plot0}

    \addplot[color=red,mark=|,no markers,]
        coordinates {(8,0.0051404)(16,0.010141)(32,0.018522)(64,0.0371274)(128,0.0728466)(256,0.14421)(512,0.28737)(1024,0.576266)(2048,1.16553)(4096,2.32502)(8192,4.6339)(16384,9.27307)};
        \label{plots:plot1}

    \addplot[color=brown,mark=|,no markers,]
        coordinates {(8,0.005266)(16,0.0101128)(32,0.0186622)(64,0.037421)(128,0.0733336)(256,0.150844)(512,0.292342)(1024,0.579372)(2048,1.17284)(4096,2.32042)(8192,4.61489)(16384,9.28903)};
        \label{plots:plot2}

    \addplot[color=green,mark=|,no markers,]
        coordinates {(8,0.0052378)(16,0.0101974)(32,0.0184656)(64,0.0376728)(128,0.0731106)(256,0.148385)(512,0.287394)(1024,0.588945)(2048,1.20434)(4096,2.33993)(8192,4.70186)(16384,9.3825)};
        \label{plots:plot3}

    \addplot[color=black,mark=|,no markers,]
        coordinates {(8,0.0051544)(16,0.0100716)(32,0.0185492)(64,0.0374358)(128,0.0727044)(256,0.144363)(512,0.290891)(1024,0.580702)(2048,1.16753)(4096,2.34962)(8192,4.67139)(16384,9.38233)};
        \label{plots:plot4}


    \nextgroupplot[
        title=\empty,
        xlabel={N},
        ylabel=\empty,
        xmin=0, xmax=16384,
        ymin=0, ymax=20.0,
        xtick={8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768},
        xticklabels={8,,,,,,,,,,,,},
        ytick={0.0,10.0,20.0,30.0},
        ymajorgrids=true,
        grid style=dashed,
        scaled x ticks=false,
        scaled y ticks=true,
        ]

    \addplot[color=blue,mark=|,no markers,]
        coordinates {(8,0.0049162)(16,0.009847)(32,0.0194726)(64,0.0389404)(128,0.0794314)(256,0.16408)(512,0.340181)(1024,0.70777)(2048,1.44916)(4096,3.05267)(8192,6.52436)(16384,14.1962)};
        \label{plots:plot0}

    \addplot[color=red,mark=|,no markers,]
        coordinates {(8,0.0047908)(16,0.0098892)(32,0.0191372)(64,0.038582)(128,0.0783966)(256,0.163255)(512,0.336729)(1024,0.705795)(2048,1.46342)(4096,3.09174)(8192,6.51279)(16384,14.6249)};
        \label{plots:plot1}

    \addplot[color=brown,mark=|,no markers,]
        coordinates {(8,0.0047214)(16,0.0094002)(32,0.018158)(64,0.0367792)(128,0.0730412)(256,0.146036)(512,0.292859)(1024,0.585271)(2048,1.1712)(4096,2.34171)(8192,4.69376)(16384,9.38989)};
        \label{plots:plot2}

    \addplot[color=green,mark=|,no markers,]
        coordinates {(8,0.005001)(16,0.0098196)(32,0.0196528)(64,0.0401068)(128,0.0808782)(256,0.166377)(512,0.344639)(1024,0.719281)(2048,1.49419)(4096,3.1028)(8192,6.65632)(16384,14.4204)};
        \label{plots:plot3}

    \addplot[color=black,mark=|,no markers,]
        coordinates {(8,0.0049582)(16,0.0098196)(32,0.0196408)(64,0.0394638)(128,0.080106)(256,0.164841)(512,0.341456)(1024,0.728442)(2048,1.45667)(4096,3.06873)(8192,6.55384)(16384,14.2833)};
        \label{plots:plot4}

    \coordinate (bot) at (rel axis cs:1,0);% coordinate at bottom of the last plot

    \end{groupplot}

    \path (myplot c1r1.outer north west)% plot in column 1 row 1
          -- node[anchor=south,rotate=90] {Time [milliseconds]}% label midway
          (myplot c1r3.outer south west);% plot in column 1 row 3

    % legend
    \path (myplot c1r3.south west|-current bounding box.south)--
      coordinate(legendpos)
      (myplot c2r3.south east|-current bounding box.south);
    \matrix[
        matrix of nodes,
        anchor=south,
        draw,
        inner sep=0.2em,
        draw
      ]at([yshift=-5ex]legendpos)
      {
        \ref{plots:plot0}& Boost.FlatMap&[5pt]
        \ref{plots:plot1}& std::map&[5pt]
        \ref{plots:plot2}& std::unordered\_map&[5pt]
        \ref{plots:plot3}& std::vector&[5pt]
        \ref{plots:plot4}& std::vector (custom pair)&[5pt]\\
      };

\end{tikzpicture}
\\
\\


\code{find()} performance is roughly similar across all the
implementations, and they all show superlinear growth.  Note that
Boost.FlatMap performs the best here.

\begin{tikzpicture}
    \begin{groupplot}[group style={group size=2 by 3, group name=myplot}, width=3.25in]


    \nextgroupplot[
        title={<int, int> Elements},
        xlabel=\empty,
        ylabel={Windows/MSVC 2015},
        xmin=0, xmax=16384,
        ymin=0, ymax=40.0,
        xtick={8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768},
        xticklabels={8,,,,,,,,,,,,},
        ytick={0.0,10.0,20.0,30.0,40.0,50.0},
        ymajorgrids=true,
        grid style=dashed,
        scaled x ticks=false,
        scaled y ticks=true,
        ]

    \addplot[color=blue,mark=|,no markers,]
        coordinates {(8,0.000541)(16,0.0010216)(32,0.0022236)(64,0.0056496)(128,0.0127406)(256,0.0313702)(512,0.0841938)(1024,0.232199)(2048,0.773585)(4096,2.81876)(8192,9.89025)(16384,38.9125)};
        \label{plots:plot0}

    \addplot[color=red,mark=|,no markers,]
        coordinates {(8,0.0009014)(16,0.0015626)(32,0.003726)(64,0.0073322)(128,0.015024)(256,0.0356346)(512,0.092783)(1024,0.173731)(2048,0.380341)(4096,0.878693)(8192,1.80137)(16384,4.04511)};
        \label{plots:plot1}

    \addplot[color=brown,mark=|,no markers,]
        coordinates {(8,0.0007812)(16,0.001382)(32,0.0026442)(64,0.005829)(128,0.0105166)(256,0.020792)(512,0.0483166)(1024,0.0856314)(2048,0.175536)(4096,0.378888)(8192,0.731652)(16384,1.51804)};
        \label{plots:plot2}

    \addplot[color=green,mark=|,no markers,]
        coordinates {(8,0.000421)(16,0.0010218)(32,0.002224)(64,0.0049278)(128,0.0111168)(256,0.0277044)(512,0.0774582)(1024,0.229375)(2048,0.743303)(4096,2.66576)(8192,9.70762)(16384,38.411)};
        \label{plots:plot3}

    \addplot[color=black,mark=|,no markers,]
        coordinates {(8,0.0003604)(16,0.001142)(32,0.0019232)(64,0.0047468)(128,0.010757)(256,0.0247586)(512,0.0523418)(1024,0.1265)(2048,0.382136)(4096,0.875822)(8192,2.87129)(16384,10.0994)};
        \label{plots:plot4}

    \coordinate (top) at (rel axis cs:0,1);% coordinate at top of the first plot


    \nextgroupplot[
        title={<string, string> Elements},
        xlabel=\empty,
        ylabel=\empty,
        xmin=0, xmax=16384,
        ymin=0, ymax=900.0,
        xtick={8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768},
        xticklabels={8,,,,,,,,,,,,},
        ytick={0.0,100.0,200.0,300.0,400.0,500.0,600.0,700.0,800.0,900.0,1000.0},
        ymajorgrids=true,
        grid style=dashed,
        scaled x ticks=false,
        scaled y ticks=true,
        ]

    \addplot[color=blue,mark=|,no markers,]
        coordinates {(8,0.001262)(16,0.0026438)(32,0.0069104)(64,0.0194104)(128,0.0796826)(256,0.22908)(512,0.864029)(1024,3.45666)(2048,13.437)(4096,52.8857)(8192,208.433)(16384,814.115)};
        \label{plots:plot0}

    \addplot[color=red,mark=|,no markers,]
        coordinates {(8,0.0012622)(16,0.0025236)(32,0.0045062)(64,0.0088938)(128,0.0224758)(256,0.0540846)(512,0.14795)(1024,0.286288)(2048,0.650696)(4096,1.33265)(8192,3.1215)(16384,6.88681)};
        \label{plots:plot1}

    \addplot[color=brown,mark=|,no markers,]
        coordinates {(8,0.0010216)(16,0.0016226)(32,0.003606)(64,0.0068506)(128,0.0122586)(256,0.0262624)(512,0.0543264)(1024,0.140739)(2048,0.236227)(4096,0.465966)(8192,1.02978)(16384,2.07677)};
        \label{plots:plot2}

    \addplot[color=green,mark=|,no markers,]
        coordinates {(8,0.0012622)(16,0.0027036)(32,0.0069706)(64,0.040383)(128,0.0687484)(256,0.286467)(512,0.855679)(1024,3.36767)(2048,13.3327)(4096,50.4812)(8192,210.992)(16384,823.812)};
        \label{plots:plot3}

    \addplot[color=black,mark=|,no markers,]
        coordinates {(8,0.001382)(16,0.0023438)(32,0.0064902)(64,0.0263218)(128,0.0733728)(256,0.235628)(512,0.943835)(1024,3.37662)(2048,12.7748)(4096,53.3603)(8192,207.826)(16384,827.681)};
        \label{plots:plot4}


    \nextgroupplot[
        title=\empty,
        xlabel=\empty,
        ylabel={Linux/Clang 3.8},
        xmin=0, xmax=16384,
        ymin=0, ymax=200.0,
        xtick={8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768},
        xticklabels={8,,,,,,,,,,,,},
        ytick={0.0,100.0,200.0,300.0},
        ymajorgrids=true,
        grid style=dashed,
        scaled x ticks=false,
        scaled y ticks=true,
        ]

    \addplot[color=blue,mark=|,no markers,]
        coordinates {(8,0.0048192)(16,0.0094292)(32,0.0187454)(64,0.0376436)(128,0.0752052)(256,0.170874)(512,0.3487)(1024,0.925614)(2048,2.09986)(4096,11.8845)(8192,52.9383)(16384,165.34)};
        \label{plots:plot0}

    \addplot[color=red,mark=|,no markers,]
        coordinates {(8,0.0047492)(16,0.0098746)(32,0.0201284)(64,0.0372242)(128,0.0742704)(256,0.19966)(512,0.407764)(1024,0.634273)(2048,1.48961)(4096,2.90778)(8192,5.82129)(16384,11.9717)};
        \label{plots:plot1}

    \addplot[color=brown,mark=|,no markers,]
        coordinates {(8,0.0053918)(16,0.0100434)(32,0.0195972)(64,0.038469)(128,0.0769516)(256,0.189253)(512,0.309525)(1024,0.770039)(2048,1.52985)(4096,3.02348)(8192,6.11208)(16384,12.2942)};
        \label{plots:plot2}

    \addplot[color=green,mark=|,no markers,]
        coordinates {(8,0.0048614)(16,0.009513)(32,0.018591)(64,0.0372674)(128,0.0786696)(256,0.158554)(512,0.331421)(1024,0.866333)(2048,3.17126)(4096,11.7611)(8192,52.8485)(16384,197.95)};
        \label{plots:plot3}

    \addplot[color=black,mark=|,no markers,]
        coordinates {(8,0.0048192)(16,0.0095264)(32,0.0185778)(64,0.0369334)(128,0.0732796)(256,0.152772)(512,0.410979)(1024,0.638711)(2048,1.87509)(4096,4.61748)(8192,15.591)(16384,81.4043)};
        \label{plots:plot4}


    \nextgroupplot[
        title=\empty,
        xlabel=\empty,
        ylabel=\empty,
        xmin=0, xmax=16384,
        ymin=0, ymax=2000.0,
        xtick={8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768},
        xticklabels={8,,,,,,,,,,,,},
        ytick={0.0,1000.0,2000.0,3000.0},
        ymajorgrids=true,
        grid style=dashed,
        scaled x ticks=false,
        scaled y ticks=true,
        ]

    \addplot[color=blue,mark=|,no markers,]
        coordinates {(8,0.0065926)(16,0.0139686)(32,0.030814)(64,0.080904)(128,0.208056)(256,0.723139)(512,3.32461)(1024,11.7122)(2048,22.3965)(4096,134.409)(8192,486.86)(16384,1822.09)};
        \label{plots:plot0}

    \addplot[color=red,mark=|,no markers,]
        coordinates {(8,0.0062018)(16,0.0120408)(32,0.0245832)(64,0.0513184)(128,0.10919)(256,0.230895)(512,0.520242)(1024,1.13297)(2048,2.29887)(4096,4.78837)(8192,10.2731)(16384,22.3226)};
        \label{plots:plot1}

    \addplot[color=brown,mark=|,no markers,]
        coordinates {(8,0.0069556)(16,0.0139266)(32,0.0278104)(64,0.055762)(128,0.111299)(256,0.236511)(512,0.456583)(1024,0.956253)(2048,1.85407)(4096,3.67611)(8192,7.81764)(16384,15.8978)};
        \label{plots:plot2}

    \addplot[color=green,mark=|,no markers,]
        coordinates {(8,0.006579)(16,0.014038)(32,0.0316654)(64,0.078892)(128,0.27051)(256,0.726681)(512,3.31104)(1024,11.6991)(2048,39.039)(4096,134.321)(8192,486.848)(16384,1826.08)};
        \label{plots:plot3}

    \addplot[color=black,mark=|,no markers,]
        coordinates {(8,0.0066352)(16,0.0138992)(32,0.030871)(64,0.0782216)(128,0.210083)(256,0.707966)(512,3.34642)(1024,11.6513)(2048,39.0619)(4096,134.42)(8192,485.219)(16384,1823.61)};
        \label{plots:plot4}


    \nextgroupplot[
        title=\empty,
        xlabel={N},
        ylabel={Linux/GCC 4.8.4},
        xmin=0, xmax=16384,
        ymin=0, ymax=80.0,
        xtick={8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768},
        xticklabels={8,,,,,,,,,,,,},
        ytick={0.0,10.0,20.0,30.0,40.0,50.0,60.0,70.0,80.0,90.0},
        ymajorgrids=true,
        grid style=dashed,
        scaled x ticks=false,
        scaled y ticks=true,
        ]

    \addplot[color=blue,mark=|,no markers,]
        coordinates {(8,0.0051684)(16,0.0100988)(32,0.0189688)(64,0.0381186)(128,0.0758052)(256,0.156347)(512,0.333535)(1024,0.744523)(2048,1.81553)(4096,4.86591)(8192,15.731)(16384,77.9346)};
        \label{plots:plot0}

    \addplot[color=red,mark=|,no markers,]
        coordinates {(8,0.0056428)(16,0.0108672)(32,0.0196952)(64,0.0389858)(128,0.0756944)(256,0.153175)(512,0.301431)(1024,0.615718)(2048,1.24836)(4096,2.47892)(8192,4.99536)(16384,10.2227)};
        \label{plots:plot1}

    \addplot[color=brown,mark=|,no markers,]
        coordinates {(8,0.0069282)(16,0.0104484)(32,0.019375)(64,0.038595)(128,0.0752062)(256,0.149309)(512,0.291811)(1024,0.591289)(2048,1.18659)(4096,2.35797)(8192,4.718)(16384,9.51694)};
        \label{plots:plot2}

    \addplot[color=green,mark=|,no markers,]
        coordinates {(8,0.005085)(16,0.0100704)(32,0.0190798)(64,0.0385254)(128,0.0756112)(256,0.154488)(512,0.330023)(1024,0.74344)(2048,1.81547)(4096,4.87871)(8192,15.683)(16384,77.3447)};
        \label{plots:plot3}

    \addplot[color=black,mark=|,no markers,]
        coordinates {(8,0.0051126)(16,0.0100714)(32,0.0189274)(64,0.0374906)(128,0.0739058)(256,0.149056)(512,0.303459)(1024,0.631182)(2048,1.36308)(4096,3.02529)(8192,7.94798)(16384,24.6787)};
        \label{plots:plot4}


    \nextgroupplot[
        title=\empty,
        xlabel={N},
        ylabel=\empty,
        xmin=0, xmax=16384,
        ymin=0, ymax=600.0,
        xtick={8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768},
        xticklabels={8,,,,,,,,,,,,},
        ytick={0.0,100.0,200.0,300.0,400.0,500.0,600.0,700.0},
        ymajorgrids=true,
        grid style=dashed,
        scaled x ticks=false,
        scaled y ticks=true,
        ]

    \addplot[color=blue,mark=|,no markers,]
        coordinates {(8,0.0049582)(16,0.0100994)(32,0.0213012)(64,0.046331)(128,0.10264)(256,0.252517)(512,0.670441)(1024,2.04984)(2048,9.59907)(4096,38.1017)(8192,135.417)(16384,500.412)};
        \label{plots:plot0}

    \addplot[color=red,mark=|,no markers,]
        coordinates {(8,0.0052106)(16,0.0103918)(32,0.0205288)(64,0.0422002)(128,0.0866408)(256,0.180538)(512,0.375797)(1024,0.789487)(2048,1.62409)(4096,3.35192)(8192,7.08697)(16384,15.3573)};
        \label{plots:plot1}

    \addplot[color=brown,mark=|,no markers,]
        coordinates {(8,0.0050568)(16,0.0098624)(32,0.0193746)(64,0.0389594)(128,0.0768664)(256,0.15428)(512,0.31564)(1024,0.616745)(2048,1.243)(4096,2.49239)(8192,5.01825)(16384,10.1566)};
        \label{plots:plot2}

    \addplot[color=green,mark=|,no markers,]
        coordinates {(8,0.0053354)(16,0.010365)(32,0.0229774)(64,0.0462372)(128,0.103739)(256,0.259173)(512,0.710587)(1024,2.40604)(2048,11.2079)(4096,43.2541)(8192,146.819)(16384,523.179)};
        \label{plots:plot3}

    \addplot[color=black,mark=|,no markers,]
        coordinates {(8,0.0051558)(16,0.0102964)(32,0.021274)(64,0.045104)(128,0.09987)(256,0.24391)(512,0.651965)(1024,2.00616)(2048,9.4564)(4096,37.7574)(8192,134.736)(16384,496.093)};
        \label{plots:plot4}

    \coordinate (bot) at (rel axis cs:1,0);% coordinate at bottom of the last plot

    \end{groupplot}

    \path (myplot c1r1.outer north west)% plot in column 1 row 1
          -- node[anchor=south,rotate=90] {Time [milliseconds]}% label midway
          (myplot c1r3.outer south west);% plot in column 1 row 3

    % legend
    \path (myplot c1r3.south west|-current bounding box.south)--
      coordinate(legendpos)
      (myplot c2r3.south east|-current bounding box.south);
    \matrix[
        matrix of nodes,
        anchor=south,
        draw,
        inner sep=0.2em,
        draw
      ]at([yshift=-5ex]legendpos)
      {
        \ref{plots:plot0}& Boost.FlatMap&[5pt]
        \ref{plots:plot1}& std::map&[5pt]
        \ref{plots:plot2}& std::unordered\_map&[5pt]
        \ref{plots:plot3}& std::vector&[5pt]
        \ref{plots:plot4}& std::vector (custom pair)&[5pt]\\
      };

\end{tikzpicture}
\\
\\


Erasure has a similar performance profile to insertion, except that the sorted
\code{vector<pair<int, int>>} performs substantially better than
Boost.FlatMap.\\


\subsection{Implications}

TODO Iteration is vastly cheaper for contiguous-storage variants.  It has been
suggested that a \code{map} with a custom allocator can achieve similar
performance to flat data structures, but this would not apply to iteration
performance, unless the values were added to the \code{map} in sorted order.\\

In all the graphs above, the reason the custom-\code{pair} sorted vector
performs so much better than \code{vector<pair<int, int>>} seems to be that
the custom-\code{pair} type has \code{nothrow} special functions.
Implementing all the special functions and adding \code{nothrow(false)} to
each makes the custom-\code{pair} version perform identically to the
\code{pair<int, int>} version.

Boost.FlatMap differs quite a bit from a sorted \code{vector}.  Clearly there
are a lot of QOI choices to make in implementing a standard \code{flat_map}.
